
@{
    ViewBag.Title = "الإحصائيات";
}

<!--......Created by: Abeer......-->
<!--صفحة الملف الشخصي-->


<style>
    .highcharts-figure,
    .highcharts-data-table table {
        min-width: 320px;
        max-width: 660px;
        margin: 1em auto;
    }

    .highcharts-data-table table {
        font-family: Verdana, sans-serif;
        border-collapse: collapse;
        border: 1px solid #ebebeb;
        margin: 10px auto;
        text-align: center;
        width: 100%;
        max-width: 500px;
    }

    .highcharts-data-table caption {
        padding: 1em 0;
        font-size: 1.2em;
        color: #555;
    }

    .highcharts-data-table th {
        font-weight: 600;
        padding: 0.5em;
    }

    .highcharts-data-table td,
    .highcharts-data-table th,
    .highcharts-data-table caption {
        padding: 0.5em;
    }

    .highcharts-data-table thead tr,
    .highcharts-data-table tr:nth-child(even) {
        background: #f8f8f8;
    }

    .highcharts-data-table tr:hover {
        background: #f1f7ff;
    }

    section {
        padding-top: 50px;
        padding-bottom: 50px;
    }

    #details {
        text-align: center;
        margin-bottom: 0.5%;
    }

    #age {
        background-color: red;
        border-radius: 20px;
        background-color: #04AA6D;
        width: 12%;
        margin-left: auto;
        margin-right: auto;
    }

    h2 {
        text-align: center;
        font-size: 14px;
        color: white;
    }

    .vl {
        border-left: 2px dotted #000000;
        height: 60px;
        position: relative;
        margin-left: 50%;
        margin-right: 50%;
        top: 0;
        opacity: 0.1;
    }

    .sec {
        padding-top: 100px;
        padding-bottom: 100px;
    }

    #chart {
        padding: 40px;
        border-radius: 20px;
        background-color: white;
        box-shadow: 0 0 5px #808080;
        width: 600px;
        margin-left: auto;
        margin-right: auto;
    }
</style>

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<section style="background-color: #D9F5D9;">

    <div class="sec">
        <div id="age"><h2>عمر الولادة</h2></div>
        <div>
            <p id="details">عدد الأطفال المحصنين بتطعيمات عمر الولادة كاملة إلى مجموع عدد الأطفال</p>
        </div>

        <div class="vl"></div>

        <div id="chart">
            <figure class="highcharts-figure">
                <div id="birth-age"></div>
            </figure>
        </div>
    </div>

    <div class="sec">
        <div id="age"><h2>عمر شهرين</h2></div>
        <div>
            <p id="details">عدد الأطفال المحصنين بتطعيمات عمر الشهرين كاملة إلى مجموع عدد الأطفال</p>
        </div>

        <div class="vl"></div>

        <div id="chart">
            <figure class="highcharts-figure">
                <div id="two-months"></div>
            </figure>
        </div>
    </div>

    <div class="sec">
        <div id="age"><h2>عمر 4 شهور</h2></div>
        <div>
            <p id="details">عدد الأطفال المحصنين بتطعيمات عمر 4 شهور كاملة إلى مجموع عدد الأطفال</p>
        </div>

        <div class="vl"></div>

        <div id="chart">
            <figure class="highcharts-figure">
                <div id="four-months"></div>
            </figure>
        </div>
    </div>

    <div class="sec">
        <div id="age"><h2>عمر 6 شهور</h2></div>
        <div>
            <p id="details">عدد الأطفال المحصنين بتطعيمات عمر 6 شهور كاملة إلى مجموع عدد الأطفال</p>
        </div>

        <div class="vl"></div>
        <div id="chart">
            <figure class="highcharts-figure">
                <div id="six-months"></div>
            </figure>
        </div>
    </div>


    <div class="sec">
        <div id="age"><h2>عمر 9 شهور</</h2></div>
        <div>
            <p id="details">عدد الأطفال المحصنين بتطعيمات عمر 9 شهور كاملة إلى مجموع عدد الأطفال</p>
        </div>

        <div class="vl"></div>

        <div id="chart">
            <figure class="highcharts-figure">
                <div id="nine-months"></div>
            </figure>
        </div>
    </div>

    <div class="sec">
        <div id="age"><h2>عمر 12 شهر</h2></div>
        <div>
            <p id="details">عدد الأطفال المحصنين بتطعيمات عمر 12 شهر كاملة إلى مجموع عدد الأطفال</p>
        </div>

        <div class="vl"></div>

        <div id="chart">
            <figure class="highcharts-figure">
                <div id="twelve-months"></div>
            </figure>
        </div>
    </div>

    <div class="sec">
        <div id="age"><h2>عمر 18 شهر</h2></div>
        <div>
            <p id="details">عدد الأطفال المحصنين بتطعيمات عمر 18 شهر كاملة إلى مجموع عدد الأطفال</p>
        </div>

        <div class="vl"></div>
        <div id="chart">
            <figure class="highcharts-figure">
                <div id="yearandhalf"></div>
            </figure>
        </div>
    </div>

    <div class="sec">
        <div id="age"><h2>عمر 24 شهر</h2></div>
        <div>
            <p id="details">عدد الأطفال المحصنين بتطعيمات عمر 24 شهر كاملة إلى مجموع عدد الأطفال</p>
        </div>

        <div class="vl"></div>

        <div id="chart">
            <figure class="highcharts-figure">
                <div id="twoyears"></div>
            </figure>
        </div>
    </div>

    <div class="sec">
        <div id="age"><h2>عمر 4 - 6 سنوات</h2></div>
        <div>
            <p id="details">عدد الأطفال المحصنين بتطعيمات عمر 4 - 6 سنوات كاملة إلى مجموع عدد الأطفال</p>
        </div>

        <div class="vl"></div>
        <div id="chart">
            <figure class="highcharts-figure">
                <div id="fourtosixyears"></div>
            </figure>
        </div>
    </div>


</section>

@section Scripts{
    <script>
        var AllChildren = 0;
        var AtBirth = 0;
        var TwoMonths = 0;
        var FourMonths = 0;
        var SixMonths = 0;
        var NineMonths = 0;
        var OneYear = 0;
        var OneYearAndHalf = 0;
        var TwoYears = 0;
        var FourToSixYears = 0;
        $(document).ready(function () {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetStatistics", "HSPs", new { Area = "" })',
                data: JSON.stringify({}),
                contentType: "application/json:charset=utf-8",
                dataType: "json",
                success: function (result) {
                    AllChildren = result.AllChildren;
                    AtBirth = result.AllChildren;
                    TwoMonths = result.AllChildren;
                    FourMonths = result.AllChildren;
                    SixMonths = result.AllChildren;
                    NineMonths = result.AllChildren;
                    OneYear = result.AllChildren;
                    OneYearAndHalf = result.AllChildren;
                    TwoYears = result.AllChildren;
                    FourToSixYears = result.AllChildren;
                    showChart('birth-age', AllChildren, AtBirth);
                    showChart('two-months', AllChildren, TwoMonths);
                    showChart('four-months', AllChildren, FourMonths);
                    showChart('six-months', AllChildren, SixMonths);
                    showChart('nine-months', AllChildren, NineMonths);
                    showChart('twelve-months', AllChildren, OneYear);
                    showChart('yearandhalf', AllChildren, OneYearAndHalf);
                    showChart('twoyears', AllChildren, TwoYears);
                    showChart('fourtosixyears', AllChildren, FourToSixYears);
                }
            });
        });
        //
        function showChart(element, allChildren, immunized) {
            Highcharts.chart(element, {
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false,
                    type: 'pie'
                },
                title: {
                    text: ' '
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.y}</b>'
                },
                accessibility: {
                    point: {
                        valueSuffix: '%'
                    }
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: false
                        },
                        showInLegend: true
                    }
                },
                series: [{
                    name: 'العدد',
                    colorByPoint: true,
                    data: [{
                        name: 'عدد الأطفال',
                        y: allChildren,
                        sliced: true,
                        selected: true
                    }, {
                            name: 'عدد الأطفال المحصنين',
                            y: immunized
                    }]
                }]
            });
        }

        //
    </script>
}